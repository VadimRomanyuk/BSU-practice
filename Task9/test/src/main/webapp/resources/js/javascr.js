/*var I =*/;(function(){
    var photoPosts = [
        {id: '1',
    
        description: 'Женская сборная Беларуси выиграла эстафету в рамках соревнований по биатлону на Олимпийских играх в Пхёнчхане!!!',
    
        createdAt: new Date('2005-02-20T23:00:00'),
    
        author: 'Ivanov',
    
        photoLink: 'http://ont.by/webroot/delivery/files/news/2018/02/22/Dom.jpg',
        
        likes : ["Petrov","Sidorov"],
    
        hashTags : ["#sunny","#champ","#Belarus"]
    
       },
    
       {id: '33',
    
        description: 'Манчестер Юнайтед в 1/4 финала ЛЧ',
    
        createdAt: new Date('2016-01-23T23:15:00'),
    
        author: 'Petrov',
    
        photoLink: "http://images.thepeoplesperson.com/wp-content/uploads/2018/02/03160539/Team-min.jpg",
    
        likes : ["Grealish","Sidorov"],
    
        hashTags : ["#MU","#WIN","#HardWay","#roadtofinal","#goodluck"]
    
       },
    
       {id: '3',
    
        description: 'Кот с клубком',
    
        createdAt: new Date('2001-03-12T11:11:00'),
    
        author: 'Sidorov',
    
        photoLink: 'https://img.fonwall.ru/o/41/kot_klubok_igra_nitka_stol.jpg?route=mid&amp;h=750',
    
        likes : ["Petrov","Grealish","Sidorov","Snow"],
    
        hashTags : ["#color","#pretty","#animals"]
    
       },
    
       {id: '4',
    
        description: 'Красная Панда',
    
        createdAt: new Date('1999-08-23T10:01:00'),
    
        author: 'Snow',
    
        photoLink: 'https://avatars.mds.yandex.net/get-pdb/1341737/c78450e7-d973-4f65-9b86-d2b2cea1b010/s1200?webp=false',
    
        likes : ["Petrov","Grealish","Sidorov","Tolisso","Snow"],
    
        hashTags : ["#garden","#sunny","#pretty","#animals"]
    
       },
        
       {id: '5',
    
        description: 'Снежный Барс',
    
        createdAt: new Date('1997-03-11T18:08:00'),
    
        author: 'Grealish',
    
        photoLink: 'https://avatars.mds.yandex.net/get-pdb/401063/613954c5-50c8-4350-8243-87d81542b316/s1200?webp=false',
    
        likes : ["Petrov","Grealish","Snow","Tolisso"],
    
        hashTags : ["#color","#sunny","#pretty","#animals"]
    
       },
        
       {id: '6',
    
        description: 'Клубника',
    
        createdAt: new Date('2019-02-25T23:45:00'),
    
        author: 'Dudek',
    
        photoLink: 'https://avatars.mds.yandex.net/get-pdb/1602331/d332e4aa-1e7a-46e6-a14a-e7a5b90a7c23/s1200?webp=false',
    
        likes : ["Petrov","Grealish","Ivanov","Tolisso"],
    
        hashTags : ["#food","#sunny","#pretty","#fields"]
    
       },
        
       {id: '7',
    
        description: 'Сакура',
    
        createdAt: new Date('1996-11-01T05:10:00'),
    
        author: 'Tolisso',
    
        photoLink: 'https://www.nastol.com.ua/download.php?img=201803/2560x1600/nastol.com.ua-274419.jpg',
    
        likes : ["Petrov","Grealish","Sidorov","Tolisso"],
    
        hashTags : ["#color","#sunny","#pretty","#garden"]
    
       },
        
       {id: '8',
    
        description: 'Слон',
    
        createdAt: new Date('1998-02-23T23:00:00'),
    
        author: 'Brooks',
    
        photoLink: 'https://avatars.mds.yandex.net/get-zen_doc/60857/pub_5b8fc55e355be400aaa78c03_5b8fc58c355be400aaa78c06/scale_1200',
    
        likes : ["Petrov","Dudek","Tolisso"],
    
        hashTags : ["#color","#sunny","#pretty","#animals"]
    
       },
        
       {id: '9',
    
        description: 'Морская звезда',
    
        createdAt: new Date('2018-02-23T23:00:00'),
    
        author: 'Sidorov',
    
        photoLink: 'https://avatars.mds.yandex.net/get-pdb/1043736/d99c2a0c-b0ff-4fa0-a87b-dd14555699d1/s1200?webp=false',
    
        likes : ["Dudek","Grealish","Sidorov","Tolisso"],
    
        hashTags : ["#sunny","#water","#animals"]
    
       },
        
       {id: '10',
    
        description: 'Жирафы на природе',
    
        createdAt: new Date('2001-05-17T17:00:00'),
    
        author: 'Brooks',
    
        photoLink: 'https://www.1zoom.ru/big2/807/304544-Sepik.jpg',
    
        likes : ["Petrov","Grealish","Dudek","Tolisso", "Brooks"],
    
        hashTags : ["#sunny","#pretty","#animals"]
    
       },
        
       {id: '11',
    
        description: 'Извилистая дорога',
    
        createdAt: new Date('2003-03-14T12:01:00'),
    
        author: 'Dudek',
    
        photoLink: 'https://wallpaperscave.ru/images/original/18/06-12/man-made-road-57025.jpg',
    
        likes : ["Petrov","Grealish","Tolisso"],
    
        hashTags : ["#evening","#pretty","#way"]
    
       },
        
       {id: '12',
    
        description: '«Феррари» – это «Манчестер Юнайтед». У нее появился свой Сульшер',
    
        createdAt: new Date('2018-02-23T23:00:00'),
    
        author: 'Ivanov',
    
        photoLink: 'https://by.tribuna.com/tribuna/blogs/pitstop/2372644.html',
    
        likes : ["Petrov","Grealish","Sidorov"],
    
        hashTags : ["#ferrari","#sunny","#MU","#cars"]
    
       },
        
       {id: '13',
    
        description: '«Зенит», киевское «Динамо» и «Арсенал» потерпели поражения в первых матчах 1/8 финала Лиги Европы',
        
        createdAt: new Date('2008-09-23T10:11:00'),
    
        author: 'Snow',
    
        photoLink: 'https://sport.tut.by/news/football/629103.html',
    
        likes : ["Petrov","Grealish","Ivanov","Tolisso"],
    
        hashTags : ["#RusFootball","#1/8","#EL"]
    
       },
        
       {id: '14',
    
        description: 'Арсен Венгер, возможно, продолжит карьеру в ФИФА',
    
        createdAt: new Date('2007-08-20T19:13:00'),
    
        author: 'Dudek',
    
        photoLink: 'https://www.pressball.by/news/football/320958',
    
        likes : ["Grealish","Sidorov","Tolisso"],
    
        hashTags : ["#WENYA","#FIFA"]
    
       },
        
       {id: '15',
    
        description: 'Клаудио Раньери возглавил Рому!',
    
        createdAt: new Date('2014-02-03T13:00:00'),
    
        author: 'Petrov',
    
        photoLink: 'https://www.pressball.by/news/football/320972',
    
        likes : ["Petrov","Grealish","Sidorov","Tolisso","Ivanov"],
    
        hashTags : ["#Roma","#Ranieri","#football"]
    
       },
        
       {id: '16',
    
        description: 'Шоколад',
    
        createdAt: new Date('2017-01-23T15:49:00'),
    
        author: 'Brooks',
    
        photoLink: 'https://s1.1zoom.ru/big3/21/Chocolate_Nuts_Cinnamon_436017.jpg',
    
        likes : ["Petrov","Tolisso"],
    
        hashTags : ["#breakfast","#delicious","#chocolate"]
    
       },
        
       {id: '17',
    
        description: 'Воздушные шары',
    
        createdAt: new Date('2016-03-11T20:15:00'),
    
        author: 'Ivanov',
    
        photoLink: 'https://avatars.mds.yandex.net/get-pdb/939428/12f68ca3-b7eb-4a55-99fb-f6e17a093c71/s1200?webp=false',
    
        likes : ["Petrov","Sidorov","Tolisso"],
    
        hashTags : ["#color","#sky","#pretty","#balls"]
    
       },
        
       {id: '18',
    
        description: 'Пейзаж',
    
        createdAt: new Date('2009-02-09T10:10:00'),
    
        author: 'Tolisso',
    
        photoLink: 'https://www.nastol.com.ua/pic/201209/1920x1200/nastol.com.ua-32997.jpg',
    
        likes : ["Petrov","Grealish","Sidorov","Tolisso"],
    
        hashTags : ["#color","#sunny","#pretty","#animals"]
    
       },
        
       {id: '19',
    
        description: 'Городской пейзаж',
    
        createdAt: new Date('2007-07-07T07:00:00'),
    
        author: 'Grealish',
    
        photoLink: 'https://www.nastol.com.ua/pic/201206/1440x900/nastol.com.ua-26198.jpg',
    
        likes : ["Petrov","Sidorov","Ivanov"],
    
        hashTags : ["#city","#sunny","#pretty"]
    
       },
        
       {id: '20',
    
        description: 'Кофейные зерна',
    
        createdAt: new Date('2005-02-04T22:48:00'),
    
        author: 'Petrov',
    
        photoLink: 'https://www.1zoom.ru/big2/504/332983-zero.jpg',
    
        likes : ["Brooks"],
        
        hashTags : ["#coffee","#sunny"]
    
       },
    
    ];
    
    return{
      getPhotoPost : function(id) {
    if(parseInt(id) && !(/[^0-9]/.test(id)))
    {  
      id = Number.parseInt(id);
      if(id > 0){ 
        var res = photoPosts.filter(function(a)
        {
          if(parseInt(a.id) == id){return true;}
          return false;
        })
        if(this.checkIt(res) && res.length > 0)
        {console.log("This post \n");
        console.log(res[0]);
        return res[0];}
      }
    }
    return false;
      },
      removePhotoPost : function(id)
      {
        if(this.getPhotoPost(id) !== false)
        {  var position = -1;
          for(var i = 0 ; i < photoPosts.length; i++)
          {
            if(photoPosts[i].id == id){position = i;}
          }
          if(position > -1)
          { photoPosts.splice(position,1);
          console.log("After removal")
          console.log(photoPosts);
          return true;
          }
        }
        console.log("No such post");
        return false;
      },
      checkIt: function(Object)
      {
        return !!Object;
      }, 
      checkForString : function(Object)
      {
        
       return (typeof(Object) === 'string');
      },
      checkForDate: function(Object)
      {  if(Object instanceof Date){return true;}
      Object = Object.toString();
        var regex_date = /^\d{4}\-\d{1,2}\-\d{1,2}(T[0-2][0-9]:[0-5][0-9]:[0-5][0-9])*$/;
        if(!regex_date.test(Object)){return false;}
      if(isNaN(new Date(Object))){return false;};
      var parts = Object.split("-");
      var realDate = new Date(Object);
      if(parts[0] == realDate.getFullYear().toString() &&
       parts[1]-1 == realDate.getMonth().toString() && parts[2] == realDate.getDate().toString())
      {
        return true;
      }
      return false;
      },
      checkForId: function(Object)
      {
        if(/[^0-9]/.test(Object)){return false;}
        return true;
      },
      checkEmptyStr: function(Object)
      {
        if((Object.trim())){return false;}
        return true;
      },
      validatePhotoPost: function(Object)
      {
        if(this.checkIt(Object) && this.checkIt(Object.id) && this.checkIt(Object.description)
         && this.checkIt(Object.createdAt) && this.checkIt(Object.author) && this.checkIt(Object.photoLink))
        {
           if(this.checkForString(Object.id) && this.checkForString(Object.description) &&
            this.checkForDate(Object.createdAt) && this.checkForString(Object.author) 
            && this.checkForString(Object.photoLink))
            {
               if(!this.checkEmptyStr(Object.author) && !this.checkEmptyStr(Object.photoLink) 
               && Object.description.length<200 && this.checkForId(Object.id))
               {
                 console.log("Good Post");
                 return true;
               }
            }
          }
          console.log("Invalidate PhotoPost");
        return false;
      },
      addPhotoPost: function(Object)
      {
        if(this.validatePhotoPost(Object))
        {
          photoPosts.push(Object);
          if(photoPosts[Object.id])
          {
            if(this.editPhotoPost(Object.id, Object))
            {
              return true;
            }
            return false;
          }
          console.log("Photopost added successfully")
          console.log(photoPosts);
          return true;
        }
        return false;
      },
      editPhotoPost: function(id, newPost)
      {
         if(!this.checkForId(id) || this.getPhotoPost(id) == false){
          console.log("There is no such post") 
          return false;}
          if(this.validatePhotoPost(this.getPhotoPost(id)))
          {
            if(this.checkForString(newPost.photoLink) && !this.checkEmptyStr(newPost.photoLink))
            {
              photoPosts[id-1].photoLink = newPost.photoLink;
              console.log("photolink changed successfully")
            }
            if(this.checkForString(newPost.description) && !this.checkEmptyStr(newPost.description))
            {
              photoPosts[id-1].description = newPost.description;
              console.log("description changed successfully")
            }
            console.log("Changed post ")
            console.log(photoPosts[id-1]);
            return true;
          }
          return false;
      },
      compareDates: function(a,b){return a.createdAt - b.createdAt;},
      getPhotoPosts: function(skip,top, filterConfig)
      {
        skip = skip || 0;
        top = top || 10;
        var res = photoPosts;
        if(!this.checkIt(filterConfig))
        {
          return res.slice(skip,skip+top).sort(this.compareDates);
        }
        if(this.checkIt(filterConfig.author))
        { 
           res = res.filter(function(a)
          {
            return a.author === filterConfig.author;
          });
        }
        if(this.checkIt(filterConfig.dateFrom))
        { 
           res = res.filter(function(a)
          {
            return a.createdAt >= filterConfig.dateFrom;
          });
        }
        if(this.checkIt(filterConfig.dateTo))
        { 
           res = res.filter(function(a)
          {
            return a.createdAt <= filterConfig.dateTo;
          });
        }
        if(this.checkIt(filterConfig.countLikes))
        { 
           res = res.filter(function(a)
          {
            return a.likes.length >= filterConfig.countLikes;
          });
        }
        if(this.checkIt(filterConfig.hastag))
        {
           res = res.filter(function(elem)
          {
            if(elem.hashTags.indexOf(filterConfig.hastag) != -1)
            {return true;}
            return false;
          });
        }
        res = res.slice(skip, skip + top).sort(this.compareDates);
        console.log(res);
        return res;
      }
    }
    
    }());
    /*  Tests:
    I.getPhotoPost(3);
    I.removePhotoPost(9);
    I.validatePhotoPost({author:"Shaw",id:"3",createdAt: new Date(),photoLink:"link",description:"Winter"});
    I.addPhotoPost({author:"Shaw",id:"25",createdAt: new Date(),photoLink:"link",description:"Winter"});
    I.editPhotoPost(3,{author:"Shaw",id:"3",createdAt: new Date(),photoLink:"link",description:"Winter"});
    I.getPhotoPosts(0,10,{author:"Petrov",dateFrom:new Date("2008-02-14"),dateTo:new Date("2019-01-01")});
    */
   //         Task 5
   var photoPosts = [
    {id: '1',

    description: 'Женская сборная Беларуси выиграла эстафету в рамках соревнований по биатлону на Олимпийских играх в Пхёнчхане!!!',

    createdAt: new Date('2005-02-20T23:00:00'),

    author: 'Ivanov',

    photoLink: 'http://ont.by/webroot/delivery/files/news/2018/02/22/Dom.jpg',
    
    likes : ["Petrov","Sidorov"],

    hashTags : ["#sunny","#champ","#Belarus"]

   },

   {id: '33',

    description: 'Манчестер Юнайтед в 1/4 финала ЛЧ',

    createdAt: new Date('2016-01-23T23:15:00'),

    author: 'Petrov',

    photoLink: "http://images.thepeoplesperson.com/wp-content/uploads/2018/02/03160539/Team-min.jpg",

    likes : ["Grealish","Sidorov"],

    hashTags : ["#MU","#WIN","#HardWay","#roadtofinal","#goodluck"]

   },

   {id: '3',

    description: 'Кот с клубком',

    createdAt: new Date('2001-03-12T11:11:00'),

    author: 'Sidorov',

    photoLink: 'https://img.fonwall.ru/o/41/kot_klubok_igra_nitka_stol.jpg?route=mid&amp;h=750',

    likes : ["Petrov","Grealish","Sidorov","Snow"],

    hashTags : ["#color","#pretty","#animals"]

   },

   {id: '4',

    description: 'Красная Панда',

    createdAt: new Date('1999-08-23T10:01:00'),

    author: 'Snow',

    photoLink: 'https://avatars.mds.yandex.net/get-pdb/1341737/c78450e7-d973-4f65-9b86-d2b2cea1b010/s1200?webp=false',

    likes : ["Petrov","Grealish","Sidorov","Tolisso","Snow"],

    hashTags : ["#garden","#sunny","#pretty","#animals"]

   },
    
   {id: '5',

    description: 'Снежный Барс',

    createdAt: new Date('1997-03-11T18:08:00'),

    author: 'Grealish',

    photoLink: 'https://avatars.mds.yandex.net/get-pdb/401063/613954c5-50c8-4350-8243-87d81542b316/s1200?webp=false',

    likes : ["Petrov","Grealish","Snow","Tolisso"],

    hashTags : ["#color","#sunny","#pretty","#animals"]

   },
    
   {id: '6',

    description: 'Клубника',

    createdAt: new Date('2019-02-25T23:45:00'),

    author: 'Dudek',

    photoLink: 'https://avatars.mds.yandex.net/get-pdb/1602331/d332e4aa-1e7a-46e6-a14a-e7a5b90a7c23/s1200?webp=false',

    likes : ["Petrov","Grealish","Ivanov","Tolisso"],

    hashTags : ["#food","#sunny","#pretty","#fields"]

   },
    
   {id: '7',

    description: 'Сакура',

    createdAt: new Date('1996-11-01T05:10:00'),

    author: 'Tolisso',

    photoLink: 'https://www.nastol.com.ua/download.php?img=201803/2560x1600/nastol.com.ua-274419.jpg',

    likes : ["Petrov","Grealish","Sidorov","Tolisso"],

    hashTags : ["#color","#sunny","#pretty","#garden"]

   },
    
   {id: '8',

    description: 'Слон',

    createdAt: new Date('1998-02-23T23:00:00'),

    author: 'Brooks',

    photoLink: 'https://avatars.mds.yandex.net/get-zen_doc/60857/pub_5b8fc55e355be400aaa78c03_5b8fc58c355be400aaa78c06/scale_1200',

    likes : ["Petrov","Dudek","Tolisso"],

    hashTags : ["#color","#sunny","#pretty","#animals"]

   },
    
   {id: '9',

    description: 'Морская звезда',

    createdAt: new Date('2018-02-23T23:00:00'),

    author: 'Brooks',

    photoLink: 'data:image/jpeg;base64,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',

    likes : ["Dudek","Grealish","Sidorov","Tolisso"],

    hashTags : ["#sunny","#water","#animals"]

   },
    
   {id: '10',

    description: 'Жирафы на природе',

    createdAt: new Date('2001-05-17T17:00:00'),

    author: 'Brooks',

    photoLink: 'https://www.1zoom.ru/big2/807/304544-Sepik.jpg',

    likes : ["Petrov","Grealish","Dudek","Tolisso", "Brooks"],

    hashTags : ["#sunny","#pretty","#animals"]

   },
    
   {id: '11',

    description: 'Извилистая дорога',

    createdAt: new Date('2003-03-14T12:01:00'),

    author: 'Dudek',

    photoLink: 'https://wallpaperscave.ru/images/original/18/06-12/man-made-road-57025.jpg',

    likes : ["Petrov","Grealish","Tolisso"],

    hashTags : ["#evening","#pretty","#way"]

   },
    
   {id: '12',

    description: '«Феррари» – это «Манчестер Юнайтед». У нее появился свой Сульшер',

    createdAt: new Date('2018-02-23T23:00:00'),

    author: 'Ivanov',

    photoLink: 'https://by.tribuna.com/tribuna/blogs/pitstop/2372644.html',

    likes : ["Petrov","Grealish","Sidorov"],

    hashTags : ["#ferrari","#sunny","#MU","#cars"]

   },
    
   {id: '13',

    description: '«Зенит», киевское «Динамо» и «Арсенал» потерпели поражения в первых матчах 1/8 финала Лиги Европы',
    
    createdAt: new Date('2008-09-23T10:11:00'),

    author: 'Snow',

    photoLink: 'https://sport.tut.by/news/football/629103.html',

    likes : ["Petrov","Grealish","Ivanov","Tolisso"],

    hashTags : ["#RusFootball","#1/8","#EL"]

   },
    
   {id: '14',

    description: 'Арсен Венгер, возможно, продолжит карьеру в ФИФА',

    createdAt: new Date('2007-08-20T19:13:00'),

    author: 'Dudek',

    photoLink: 'https://www.pressball.by/news/football/320958',

    likes : ["Grealish","Sidorov","Tolisso"],

    hashTags : ["#WENYA","#FIFA"]

   },
    
   {id: '15',

    description: 'Клаудио Раньери возглавил Рому!',

    createdAt: new Date('2014-02-03T13:00:00'),

    author: 'Petrov',

    photoLink: 'https://www.pressball.by/news/football/320972',

    likes : ["Petrov","Grealish","Sidorov","Tolisso","Ivanov"],

    hashTags : ["#Roma","#Ranieri","#football"]

   },
    
   {id: '16',

    description: 'Шоколад',

    createdAt: new Date('2017-01-23T15:49:00'),

    author: 'Brooks',

    photoLink: 'https://s1.1zoom.ru/big3/21/Chocolate_Nuts_Cinnamon_436017.jpg',

    likes : ["Petrov","Tolisso"],

    hashTags : ["#breakfast","#delicious","#chocolate"]

   },
    
   {id: '17',

    description: 'Воздушные шары',

    createdAt: new Date('2016-03-11T20:15:00'),

    author: 'Ivanov',

    photoLink: 'https://avatars.mds.yandex.net/get-pdb/939428/12f68ca3-b7eb-4a55-99fb-f6e17a093c71/s1200?webp=false',

    likes : ["Petrov","Sidorov","Tolisso"],

    hashTags : ["#color","#sky","#pretty","#balls"]

   },
    
   {id: '18',

    description: 'Пейзаж',

    createdAt: new Date('2009-02-09T10:10:00'),

    author: 'Tolisso',

    photoLink: 'https://www.nastol.com.ua/pic/201209/1920x1200/nastol.com.ua-32997.jpg',

    likes : ["Petrov","Grealish","Sidorov","Tolisso"],

    hashTags : ["#color","#sunny","#pretty","#animals"]

   },
    
   {id: '19',

    description: 'Городской пейзаж',

    createdAt: new Date('2007-07-07T07:00:00'),

    author: 'Grealish',

    photoLink: 'https://www.nastol.com.ua/pic/201206/1440x900/nastol.com.ua-26198.jpg',

    likes : ["Petrov","Sidorov","Ivanov"],

    hashTags : ["#city","#sunny","#pretty"]

   },
    
   {id: '20',

    description: 'Кофейные зерна',

    createdAt: new Date('2005-02-04T22:48:00'),

    author: 'Petrov',

    photoLink: 'https://www.1zoom.ru/big2/504/332983-zero.jpg',

    likes : ["Brooks"],
    
    hashTags : ["#coffee","#sunny"]

   },

];

  class PostCollection{
    
    constructor(postArray)
    { 
      this._photoPosts = new Array();
      if(postArray !== null) {
          postArray.forEach(elem => {
             if (PostCollection.validate(elem)) {
                  this._photoPosts.push(elem);
              }
          });
          this.sortPosts();
      }
    }

    static  _mainFields = ["author","createdAt","id","photoLink","likes","hashTags","description"];
   
      sortPosts()
     {
      this._photoPosts.sort(this._compareByDate);
     }

   static _checkId(id)
    {
      if(!id || (/[^0-9]/.test(id))){return false;}
      return true;
    }

    _isContain(id)
    { 
      if(this._photoPosts.find(elem => elem.id == id)){return true;}
      return false;
    }
    get(id)
    { if(PostCollection._checkId(id)){
      let post;
    if(post = this._photoPosts.find(elem => elem.id == id))
    {
      console.log("Such post is find");
      return post;
    }
  }
    return false;
    }

  static _checkFields(objFields)
   { if(objFields.length != PostCollection._mainFields.length){return false;}
     objFields = objFields.sort();
    PostCollection._mainFields = PostCollection._mainFields.sort();
     for(let i = 0 ; i < PostCollection._mainFields.length;i++)
     {
       if(objFields[i] != PostCollection._mainFields[i]){return false;}
     }
     return true;
   }

    remove(id)
    {
      if(PostCollection._checkId(id))
      {
        let elempos = this._photoPosts.findIndex(elem => elem.id == id)
        if(elempos > -1)
        {
         this._photoPosts.splice(elempos,1);
          console.log("Size of new Array " + this._photoPosts.length);
          return true;
        }
      }
      return false;
    }

    clear()
    {
      this._photoPosts.splice(0,this._photoPosts.length);
      console.log("Collection size : " + this._photoPosts.length);
    }

    static validHelp = {
      id: function(id)
      {
        if( !!id && typeof(id) === 'string' && PostCollection._checkId(id))
        {
          return true;
        }
        return false;
      },
      description: function(description)
      {
        if(!!description && (typeof(description) === 'string') && (description.length < 200)){return true;}
        return false;
      },
      createdAt: function(createdAt)
      {
        if(!!createdAt && createdAt instanceof Date){return true;}
        return false;
      },
      author: function(author)
      {
        if(!!author && (typeof(author) === 'string'))
      {
        if(author.trim()){return true;}
      }
      return false;
      },
      photoLink: function(photoLink)
      {
        if(!!photoLink && typeof(photoLink) === 'string')
        {
          if(photoLink.trim()){return true;}
        }
        return false;
      },
      hashTags: function(hastag){return true;},
      likes: function(hastag){return true;},
    }


    static validate(post)
          {
           let isCorrect = true;
           if(!PostCollection._checkFields(Object.keys(post))){return false;}
        Object.keys(post).forEach(function(elem)
        {if(!PostCollection.validHelp[elem](post[elem]))
          {isCorrect = false;}});
        return isCorrect;
    }

    add(post)
    { if(this.edit(post.id, post)){return true;}
      if(PostCollection.validate(post)){
        console.log("Post has been added to collection")
        this._photoPosts.push(post)
        this._photoPosts = this._photoPosts.sort(this._compareByDate);
      return true; }
      return false;
    }

   edit(id, post)
   {
     if(this._isContain(id) && PostCollection.validate(post))
     {
       let position = this._photoPosts.findIndex(elem => elem.id == id);
       console.log("Post has been updated");
        this._photoPosts[position].description = post.description;
        this._photoPosts[position].photoLink = post.photoLink;
        this._photoPosts[position].hashTags = post.hashTags;
        console.log(this._photoPosts[position]);
        return true;
     }
     return false;
   }

   getPostPosition(post)
   {
    return this._photoPosts.findIndex(elem => elem.id == post.id);
   }

   getPostsCount() {return this._photoPosts.length;}

   _compareByDate(a,b){return b.createdAt - a.createdAt;}
   
   getPage(skip,top,filterConfig)
   {
     skip = skip || 0;
     top = top || 10;
     let filterHelper = {
       author: function(arr, author)
       {
         return arr.filter(function(a){return a.author == author;})
       },
       dateFrom: function (arr, from)
       {
         return arr.filter(function(a){return a.createdAt >= from;})
       },
       dateTo: function(arr, endDate)
       {
         return arr.filter(function(a){return a.createdAt <= endDate;})
       },
       hashtag: function(arr,hashtag)
       {
           return arr.filter(function(a){
             if(a.hashTags.findIndex(elem => elem == hashtag) > -1)
             {return true;}
            return false;})
       },
       likesCount: function(arr,likesCount)
       {
         return arr.filter(function(a){return a.likes.length >= likesCount;})
       }
     }
     let filteredPosts = this._photoPosts;
     if(!!filterConfig){
     Object.keys(filterConfig).forEach(function(field){
       filteredPosts = filterHelper[field](filteredPosts,filterConfig[field])
     });}
     return filteredPosts.slice(skip, skip +top).sort(this._compareByDate);
   }

   addAll (posts)
   {  let invalidPosts = new Array();
       posts.forEach(elem => {if(PostCollection.validate(elem))
        {  console.log("Post has been added")
          this.add(elem);}
        else invalidPosts.push(elem);});
        console.log("Invalid posts");
        return invalidPosts;
   }
   getArrPosts()
   {
     return this._photoPosts;
   }
   getArrLength()
   {
     return this._photoPosts.length;
   }
    save(user)
   {
      let strPosts = "[";
      this._photoPosts.forEach(element => {
         strPosts += JSON.stringify(element) + ',';
      });
      strPosts += "]";
      strPosts = strPosts.replace(",]","]");
      localStorage.setItem(user + "posts",strPosts);
   }
   static restore(user)
   {
      let posts = localStorage.getItem(user + "posts");
      return JSON.parse(posts,function(key,value)
      {
         if(key == 'createdAt'){return new Date(value);}
         return value;
      });
   }
   addPhotoLiker(id, liker)
   {    
      let index = this._photoPosts.findIndex(elem => elem.id == id);
       this._photoPosts[index].likes.push(liker);
   }
   deletePhotoLiker(id, liker)
   {
    let index = this._photoPosts.findIndex(elem => elem.id == id);
    let likerPosition = this._photoPosts[index].likes.indexOf(liker);
    this._photoPosts[index].likes.splice(likerPosition,1);
   }
   isUserLikesPost(id,user)
   { if(!!!id || !!!user){console.log("no user or id");return false;}
     let post = this.get(id);
     if(!post){console.log("no post");return false;}
     let index = post.likes.findIndex(elem => elem == user);
     if(index > -1) { console.log("ok");return true;}
     console.log("bad user");
     return false;
   }
  }
  let I = new PostCollection( photoPosts);
